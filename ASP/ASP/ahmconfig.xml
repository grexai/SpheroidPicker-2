<?xml version="1.0" encoding="UTF-8"?>
<!--(c) 2014 Leica Microsystems (TM) -->
%{
USER_LOGGING = "false"
}%
<configurations>
	<config id="0" name="NewSetup" users="*" applications="SMApplications">
	<ignore>%{
		CONFIGFOLDER = "d:\dev\Libraries\Leica sdk\bin\"
		LOGFOLDER = wrap CONFIGFOLDER "lgm\log\" endwrap
		include wrap CONFIGFOLDER "ahmconfig.xml.predefines" endwrap
	}%</ignore>
		<unit name="STEREO_MICROSCOPE" id="MICROSCOPE" detect="*" driver="smAutomation.dll">
			<parameters>
				<param Microscope="S9i" XYStage="ITK Hydra XY" loglevel="2" />
				<manual-settings filedirectory="%{CONFIGFOLDER}%" />
				<unit name="persist" detect="*" driver="ahmpersist.dll"/>
				<ref-unit name="logger"/>
				<ignore>%{ if !FORCE_NO_IMAGE_SOURCE }%</ignore>
				<ref-unit name="DCTwain"/>
				<ignore>%{endif}%</ignore>
			</parameters>
		<unit name="hydra-stage" id="MICROSCOPE-STAGE" detect="*" driver="cms_hydra.dll" >
			<parameters>
				<driver-config>
					<HYDRA-Y-AXIS reverse="true" />
				</driver-config>
				<ref-unit name="logger"/>
				<unit name="uniserial-hydra" id="UNIVERSAL-COMMUNICATION-CHANNEL" driver="uniserial.dll">
					<parameters>
						<serial-config comport="COM11" ignore-auto-init="true" baudrate="38400" handshake="off" databits="8" stopbits="1" parity="none" />
						<ref-unit name="logger"/>
					</parameters>
				</unit>
			</parameters>
		</unit>
		</unit>
		<unit name="logger" detect="*" driver="logger.dll" >
			<parameters>
				<logger-config logfile="%{LOGFOLDER}%LoggerStereo.log" mode="append" max-size="4MB" separator=";"/>
				%{ if LIVE_LOGGING }%<ref-unit name="live-logging-channel" />%{endif}%
			</parameters>
		</unit>
				<unit name="ahmpersist" detect="*" driver="ahmpersist.dll">
					<parameters>
						<driver-config deep-save="1"/>
						<unit name="logger2" detect="*" driver="logger.dll">
							<parameters>
								<logger-config logfile="%{LOGFOLDER}%ahmpersist.log" alternative-filedirectory="%{ALTERNATIVE_LOGFOLDER}%"/>
								%{ if LIVE_LOGGING }%<ref-unit name="live-logging-channel"/>%{endif}%
							</parameters>
						</unit>
					</parameters>
				</unit>
		<unit name="live-logging-channel" id="UNIVERSAL-COMMUNICATION-CHANNEL" detect="*" driver="uniip.dll">
			<parameters>
				<ip-config port="2080" />
			</parameters>
		</unit>
				<unit name="hwtsurrogate" id="12800" detect="*" driver="hwtsurrogate.dll">
					<parameters>
						<driver-config filedirectory="%{CONFIGFOLDER}%" stand="S9i"/>
						<unit name="ahmpersist-surrogate" detect="*" driver="ahmpersist.dll">
							<parameters>
								<unit name="logger0" detect="*" driver="logger.dll">
									<parameters>
										<logger-config logfile="%{LOGFOLDER}%ahmpersist-surrogate.log" alternative-filedirectory="%{ALTERNATIVE_LOGFOLDER}%"/>
										%{ if LIVE_LOGGING }%<ref-unit name="live-logging-channel"/>%{endif}%
									</parameters>
								</unit>
							</parameters>
						</unit>
						<unit name="logger1" detect="*" driver="logger.dll">
							<parameters>
								<logger-config logfile="%{LOGFOLDER}%hwtsurrogate.log" alternative-filedirectory="%{ALTERNATIVE_LOGFOLDER}%"/>
								%{ if LIVE_LOGGING }%<ref-unit name="live-logging-channel"/>%{endif}%
							</parameters>
						</unit>
					</parameters>
				</unit>
	</config>
</configurations>
